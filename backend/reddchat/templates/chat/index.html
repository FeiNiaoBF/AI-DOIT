{% extends "base.html" %}

{% block title %}å¯¹è¯è¿›è¡Œä¸­ - {{ super() }}{% endblock %}

{% block messages %}
{% for message in conversation %}
<div class="message {% if message.role == 'user' %}user-message{% else %}ai-message{% endif %}">
    <div class="content">
        {% if message.role == 'user' %}
        ğŸ‘¤ ä½ ï¼š
        {% else %}
        ğŸ¤– AIï¼š
        {% endif %}
        {{ message.content }}
    </div>
    <div class="timestamp">
        {{ message.timestamp|datetimeformat('%Y-%m-%d %H:%M') }}
    </div>
</div>
{% else %}
<div class="empty-message">
    è¿˜æ²¡æœ‰å¯¹è¯è®°å½•ï¼Œå¼€å§‹èŠå¤©å§ï¼
</div>
{% endfor %}
{% endblock %}

{% block extra_css %}
<!-- è¿½åŠ ç‰¹æ®Šæ ·å¼ -->
<style>
    .ai-message pre {
        background: white;
        padding: 10px;
        border-radius: 5px;
        overflow-x: auto;
    }
</style>
{% endblock %}

{% block extra_js %}
<script>
    // è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
    window.scrollTo(0, document.body.scrollHeight);

    // å‘é€æ¶ˆæ¯çš„ç¤ºä¾‹é€»è¾‘
    document.querySelector('button').addEventListener('click', () => {
        const input = document.querySelector('input');
        console.log('å‘é€æ¶ˆæ¯:', input.value);
        input.value = '';
    });
</script>
{% endblock %}
